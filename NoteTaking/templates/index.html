<html>
    <!-- Header -->
    <head>
        <title>Note Taking</title>
        <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    </head>

<!-- --------------------------------------------------------------------------------------------------- -->

    <!-- Body -->
    <body>

        <!-- Top Bar -->
        <div class="topbar">
            <!-- Brand Identity -->
            <div class="brand">
                <!-- Logo -->
                <svg class=logo xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="100" height="100" viewBox="0 0 50 50">
                    <path d="M 13 4 C 8.0414839 4 4 8.0414839 4 13 L 4 37 C 4 41.958516 8.0414839 46 13 46 L 37 46 C 41.958516 46 46 41.958516 46 37 L 46 13 C 46 8.0414839 41.958516 4 37 4 L 13 4 z M 13 6 L 37 6 C 38.131143 6 39.194802 6.2714581 40.138672 6.7441406 L 38.337891 9.6816406 L 38.337891 11.095703 C 39.348926 12.009139 42.125484 13.812936 44 14.589844 L 44 16.466797 C 42.471626 15.945496 39.59128 14.509475 37.654297 12.734375 C 36.571516 14.552087 34.743335 17.668472 33.019531 21 L 14 21 A 1.0001 1.0001 0 1 0 14 23 L 32.033203 23 C 31.369019 24.359903 30.742002 25.709888 30.222656 27 L 14 27 A 1.0001 1.0001 0 1 0 14 29 L 29.478516 29 C 28.907632 30.721475 28.604596 32.219208 28.740234 33.28125 L 28.648438 33.464844 C 27.949799 34.46645 26.135501 34.982551 25.009766 34.988281 C 24.027967 34.992981 23.571673 34.668783 22.904297 34.1875 C 22.236921 33.706217 21.333333 33 20 33 C 18.666667 33 17.768418 33.672995 16.986328 34.142578 C 16.204238 34.612161 15.46928 35 14 35 A 1.0001 1.0001 0 1 0 14 37 C 15.86872 37 17.132215 36.387839 18.015625 35.857422 C 18.899035 35.327005 19.333333 35 20 35 C 20.666667 35 21.019251 35.29483 21.734375 35.810547 C 22.449499 36.326264 23.50333 36.995565 25.019531 36.988281 C 25.792806 36.984355 26.743552 36.863238 27.667969 36.533203 A 1.0001165 1.0001165 0 0 0 29.400391 36.435547 L 30.279297 34.675781 C 34.043084 33.54361 43.099827 18.649383 44 17.158203 L 44 37 C 44 40.877484 40.877484 44 37 44 L 13 44 C 9.1225161 44 6 40.877484 6 37 L 6 13 C 6 9.1225161 9.1225161 6 13 6 z M 14 15 A 1.0001 1.0001 0 1 0 14 17 L 32 17 A 1.0001 1.0001 0 1 0 32 15 L 14 15 z"></path>
                </svg>
                <!-- Title -->
                <span class="title">MyNoteTakingApp</span>
            </div>

            <!-- User Section -->
            <div class="userSection">
                <!-- Greeting with the username -->
                <span class="Username">Hello, {{ user }}</span>
                <!-- Logout Button -->
                <a href="/logout">
                    <svg class="logout" width="800px" height="800px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <g>
                            <path fill="none" d="M0 0h24v24H0z"/>
                            <path d="M5 22a1 1 0 0 1-1-1V3a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v3h-2V4H6v16h12v-2h2v3a1 1 0 0 1-1 1H5zm13-6v-3h-7v-2h7V8l5 4-5 4z"/>
                        </g>
                    </svg>
                </a>
            </div>
        </div>

<!-- --------------------------------------------------------------------------------------------------- -->

        <!-- Container -->
        <div class="container">

            <!-- Side Bar -->
            <div class="sidebar">
                
                <!-- Search Bar -->
                <div class="SearchBar">
                    <!-- Search Input -->
                    <input type="text" class="search" placeholder="Search...">

                    <!-- Add New Note Button -->
                    <a href="/">
                        <svg class="addNoteBtn" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path d="M13.5,20 C14.3284271,20 15,19.3284271 15,18.5 C15,17.1192881 16.1192881,16 17.5,16 C18.3284271,16 19,15.3284271 19,14.5 L19,11.5 C19,11.2238576 19.2238576,11 19.5,11 C19.7761424,11 20,11.2238576 20,11.5 L20,14.5 C20,18.0898509 17.0898509,21 13.5,21 L6.5,21 C5.11928813,21 4,19.8807119 4,18.5 L4,5.5 C4,4.11928813 5.11928813,3 6.5,3 L12.5,3 C12.7761424,3 13,3.22385763 13,3.5 C13,3.77614237 12.7761424,4 12.5,4 L6.5,4 C5.67157288,4 5,4.67157288 5,5.5 L5,18.5 C5,19.3284271 5.67157288,20 6.5,20 L13.5,20 L13.5,20 Z M15.7913481,19.5014408 C16.9873685,18.9526013 17.9526013,17.9873685 18.5014408,16.7913481 C18.1948298,16.9255432 17.8561101,17 17.5,17 C16.6715729,17 16,17.6715729 16,18.5 C16,18.8561101 15.9255432,19.1948298 15.7913481,19.5014408 L15.7913481,19.5014408 Z M18,6 L20.5,6 C20.7761424,6 21,6.22385763 21,6.5 C21,6.77614237 20.7761424,7 20.5,7 L18,7 L18,9.5 C18,9.77614237 17.7761424,10 17.5,10 C17.2238576,10 17,9.77614237 17,9.5 L17,7 L14.5,7 C14.2238576,7 14,6.77614237 14,6.5 C14,6.22385763 14.2238576,6 14.5,6 L17,6 L17,3.5 C17,3.22385763 17.2238576,3 17.5,3 C17.7761424,3 18,3.22385763 18,3.5 L18,6 Z M8.5,9 C8.22385763,9 8,8.77614237 8,8.5 C8,8.22385763 8.22385763,8 8.5,8 L12.5,8 C12.7761424,8 13,8.22385763 13,8.5 C13,8.77614237 12.7761424,9 12.5,9 L8.5,9 Z M8.5,12 C8.22385763,12 8,11.7761424 8,11.5 C8,11.2238576 8.22385763,11 8.5,11 L15.5,11 C15.7761424,11 16,11.2238576 16,11.5 C16,11.7761424 15.7761424,12 15.5,12 L8.5,12 Z M8.5,15 C8.22385763,15 8,14.7761424 8,14.5 C8,14.2238576 8.22385763,14 8.5,14 L13.5,14 C13.7761424,14 14,14.2238576 14,14.5 C14,14.7761424 13.7761424,15 13.5,15 L8.5,15 Z"/>
                        </svg>
                    </a>
                </div>
                
<!-- --------------------------------------------------------------------------------------------------- -->

                <!-- Notes List -->
                <div class="NoteList">
                    <!-- Loop through notes and display each note item -->
                    {% for _note in notes %}
                    <!-- Note Item -->
                    <div class="NoteItem">
                        <!-- Note Title -->
                        <a href="/{{ _note.id }}">
                            <span class="NoteTitle">{{cipherEngine.decrypt(_note.title)}}</span>
                        </a>
                        
                        <!-- Delete Button -->
                        <a href="/notes/{{ _note.id }}/delete" class="delete">
                            <svg class="deleteBTN" width="800px" height="800px" viewBox="0 -0.5 21 21" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                
                                <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                    <g id="Dribbble-Light-Preview" transform="translate(-179.000000, -360.000000)" fill="#FFF">
                                        <g id="icons" transform="translate(56.000000, 160.000000)">
                                            <path d="M130.35,216 L132.45,216 L132.45,208 L130.35,208 L130.35,216 Z M134.55,216 L136.65,216 L136.65,208 L134.55,208 L134.55,216 Z M128.25,218 L138.75,218 L138.75,206 L128.25,206 L128.25,218 Z M130.35,204 L136.65,204 L136.65,202 L130.35,202 L130.35,204 Z M138.75,204 L138.75,200 L128.25,200 L128.25,204 L123,204 L123,206 L126.15,206 L126.15,220 L140.85,220 L140.85,206 L144,206 L144,204 L138.75,204 Z" id="delete-[#1487]">
                                                
                                            </path>
                                        </g>
                                    </g>
                                </g>
                            </svg>
                        </a> 
                            
                    </div>
                    {% endfor %}

                </div>
            </div>

<!-- --------------------------------------------------------------------------------------------------- -->

            <!-- If a note exists, decrypt its title and content -->
            {% if note %}
                {% set initial_title = cipherEngine.decrypt(note.title) %}
                {% set initial_content = cipherEngine.decrypt(note.content) %}
                {% set note_id = note.id %}
            <!-- If no note exists, set initial values to empty strings -->
            {% else %}
                {% set initial_title = '' %}
                {% set initial_content = '' %}
                {% set note_id = '' %}
            {% endif %}

            <!-- Note Form -->
            <form class="noteArea" method="POST" action="/notes">
                {{ form.csrf_token }}
                <input type="hidden" name="note_id" value="{{ note_id }}">
                <!-- Note Title Input -->
                <textarea class="noteTitle"  name="title" placeholder="Note Title">{{initial_title}}</textarea>
                <hr>
                <!-- Note Content Input -->
                <textarea class="noteContent" name="content" placeholder="Note Content">{{initial_content}}</textarea>
                <!-- Save Button -->
                <input class="saveBTN" type="submit" value="Save">
            </form>

        </div>
        
<!-- --------------------------------------------------------------------------------------------------- -->

        <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    </body>
</html>